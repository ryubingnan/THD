@{
    ViewData["Title"] = "Technician";
}

<div class="memberInfo2" id="section-2">
    <table>
        <tr>
            <td>会员名称：</td>
            <td><input class="form-control" type="text" v-model="iptName" /></td>
            <td>会员邮箱：</td>
            <td>
                <input class="form-control" type="text" v-model="iptEmail" />
            </td>
            <td>
                <input type="button" class="ic_shoulei hide_txt png btn btn-primary btn-lg btnShoppingCart" value="查询" @@click="handleGetTechnicians" />
                <input type="button" class="ic_shoulei hide_txt png btn btn-primary btn-lg btnShoppingCart" value="清空" @@click="handleClear" />
            </td>
        </tr>
    </table>
</div>
<div>

    <table>
        <tbody v-for="(technician, i) in technicians">
            <tr>
                <td colspan="5" style="height: 40px; font-size: 19px; text-align: left; color: #00A600; font-weight: bold; padding-left: 10px;">
                    <span id="ctl00_body_RepeaterAllListInfo_ctl00_Label1">{{technician.name}}</span>
                </td>
            </tr>
            <tr>
                <td colspan="6" style="text-align: left;">
                    <span style="border: 1px solid #666666; margin: 15px; font-size: 12px; color: #666666; padding: 2px; width: 30%;">邮箱</span>{{technician.email}}
                    <span style="border: 1px solid #666666; margin: 15px; font-size: 12px; color: #666666; padding: 2px; width: 30%;">创建时间</span>{{technician.createTime}}
                    <span style="border: 1px solid #666666; margin: 15px; font-size: 12px; color: #666666; padding: 2px; width: 30%;">电话</span>{{technician.phone}}
                    <span style="border: 1px solid #666666; margin: 15px; font-size: 12px; color: #666666; padding: 2px; width: 30%;">Alias</span>{{technician.alias}}
                    <span v-if="technician.workExperienceFilePath!=null &&technician.workExperienceFilePath.length>0"  style="border: 1px solid #666666; margin: 15px; font-size: 12px; color: #666666; padding: 2px; width: 30%;">
                        <a :href="'/System/TechnicianFile?id=' + technician.id">WorkExperienceFilePath</a>
                    </span>
                </td>
            </tr>
        </tbody>
    </table>

    <table border="0">
        <tr>
            <td colspan="5" style="border-bottom:0px !important">
                <el-pagination v-model:current-page="pagination.pageIndex"
                               :page-sizes="[12, 24, 36]"
                               v-model:page-size="pagination.pageSize"
                               layout="total, sizes, prev, pager, next, jumper"
                               :total="pagination.totalCount"
                               @@size-change="handleGetTechnicians"
                               @@current-change="handleGetTechnicians">
                </el-pagination>
            </td>
        </tr>
    </table>
</div>



@section Scripts{

<script>
    createVueApp({
        /*返回行程数据*/
        data() {
            return {
                technicians: [],
                pagination: {
                    pageIndex: 1,
                    pageSize: 12,
                    totalCount: 0,
                },
                iptName: '',
                iptEmail: ''
            }
        },
        /*页面加载完成后回调下方的行程列表方法*/
        mounted() {
            this.handleGetTechnicians()
        },
        /*获取行程列表*/
        methods: {
            handleGetTechnicians() {
                this.pagination.Name = this.iptName
                this.pagination.Email = this.iptEmail
                this.getTechnicians(this.pagination).then(res => {
                    this.technicians = res.items
                    this.pagination.totalCount = res.totalCount
                    console.log(this.technicians)
                })
            },
            /*发送请求*/
            getTechnicians(pagination) {
                return this.$http.post('/System/TechnicianList', pagination)
            },
            handleClear() {
                this.iptName = ''
                this.iptEmail = ''
            }
        }
    })

</script>
}
